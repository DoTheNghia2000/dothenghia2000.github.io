<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
   <button id="scan_button">Scan</button>
   <video id="video"></video>
   <div id="result"></div>

   <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
   <script src="https://cdn.jsdelivr.net/npm/quagga/dist/quagga.min.js"></script>
   <script>

      // Định nghĩa cấu hình cho QuaggaJS
      const config = {
         inputStream: {
            name: "Live",
            type: "LiveStream",
            target: document.querySelector("#video"),
            constraints: {
               facingMode: "environment"
            }
         },
         decoder: {
            readers: ["ean_reader"]
         }
      };

      // Khởi tạo QuaggaJS với cấu hình đã định nghĩa
      Quagga.init(config, function (err) {
         if (err) {
            console.log(err);
            return;
         }

         // Bắt đầu quét mã vạch khi QuaggaJS đã sẵn sàng
         Quagga.start();
      });

      // Xử lý sự kiện khi QuaggaJS nhận được kết quả quét
      Quagga.onDetected(function (result) {
         // Lấy nội dung được quét và hiển thị lên trang web
         const code = result.codeResult.code;
         document.querySelector("#result").textContent = code;

         // Tạm dừng QuaggaJS để ngừng quét sau khi tìm thấy một mã vạch
         Quagga.stop();
      });


   </script>
</body>

</html>
